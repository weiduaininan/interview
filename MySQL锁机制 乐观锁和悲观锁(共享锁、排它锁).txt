乐观锁

顾名思义，就是对数据的处理持乐观态度，乐观的认为数据一般情况下不会发生冲突，只有提交数据更新时，才会对数据是否冲突进行检测。

查询数据的 version 版本号 num 库存数量
然后更新 版本号和库存  查询条件为 版本号和库存数量和相关查询条件来更新
如果更新失败 提示用户重新操作

悲观锁

顾名思义，就是对于数据的处理持悲观态度，总认为会发生并发冲突，获取和修改数据时，别人会修改数据。所以在整个数据处理过程中，需要将数据锁定。

共享锁

select * from table LOCK IN SHARE MODE;  可读  不可修改

排它锁

select * from table FOR UPDATE;          读都不让读